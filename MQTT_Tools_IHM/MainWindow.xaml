<Window x:Class="MQTT_Tools_IHM.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MQTT_Tools_IHM"
        xmlns:chart="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Panel de contrôle -->
        <StackPanel Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Margin="5" Background="#f0f0f0">
            <GroupBox Header="Variables" Margin="0,0,0,10">
                <StackPanel>
                    <TextBlock Text="Nom:" Margin="0,0,5,0"/>
                    <StackPanel Orientation="Horizontal">
                        <TextBox x:Name="VarNameTextBox" Width="100" Margin="0,0,5,0"/>
                        <Button Content="Ajouter" Click="AddVariable_Click"/>
                    </StackPanel>
                    <ListBox x:Name="VariablesListBox" Margin="0,5,0,0" SelectionChanged="VariablesListBox_SelectionChanged"/>
                    <Button Content="Supprimer" Click="DeleteVariable_Click" Margin="0,5,0,0"/>
                </StackPanel>
            </GroupBox>
            <GroupBox Header="Filtres" Margin="0,0,0,10">
                <StackPanel>
                    <TextBlock Text="Source:" Margin="0,0,5,0"/>
                    <ComboBox x:Name="FilterSourceComboBox" Margin="0,0,0,5"/>
                    <Button Content="Ajouter Filtre" Click="AddFilter_Click"/>
                    <ListBox x:Name="FiltersListBox" Margin="0,5,0,0" SelectionChanged="FiltersListBox_SelectionChanged"/>
                    <Button Content="Supprimer" Click="DeleteFilter_Click" Margin="0,5,0,0"/>
                </StackPanel>
            </GroupBox>
            <GroupBox Header="Paramètres" Margin="0,0,0,10">
                <StackPanel>
                    <TextBlock Text="Période (s):" Margin="0,0,5,0"/>
                    <TextBox x:Name="PeriodTextBox" Margin="0,0,0,5"/>
                    <TextBlock Text="Min:" Margin="0,0,5,0"/>
                    <TextBox x:Name="MinTextBox" Margin="0,0,0,5"/>
                    <TextBlock Text="Max:" Margin="0,0,5,0"/>
                    <TextBox x:Name="MaxTextBox" Margin="0,0,0,5"/>
                    <TextBlock Text="Bruit:" Margin="0,0,5,0"/>
                    <TextBox x:Name="NoiseTextBox" Margin="0,0,0,5"/>
                    <TextBlock Text="Période de publication (s):" Margin="0,0,5,0"/>
                    <TextBox x:Name="PublishPeriodTextBox" Margin="0,0,0,5"/>
                    <Button Content="Mettre à jour" Click="UpdateParameters_Click"/>
                </StackPanel>
            </GroupBox>
        </StackPanel>

        <!-- Graphiques -->
        <TabControl Grid.Row="0" Grid.Column="1" Grid.RowSpan="2" Margin="5">
            <TabItem Header="Variables">
                <Grid>
                    <chart:CartesianChart x:Name="VariablesChart" Zoom="Xy" LegendLocation="Right">
                        <chart:CartesianChart.AxisX>
                            <chart:Axis Title="Temps" LabelFormatter="{Binding Formatter}"/>
                        </chart:CartesianChart.AxisX>
                        <chart:CartesianChart.AxisY>
                            <chart:Axis Title="Valeur"/>
                        </chart:CartesianChart.AxisY>
                    </chart:CartesianChart>
                </Grid>
            </TabItem>
            <TabItem Header="Filtres">
                <Grid>
                    <chart:CartesianChart x:Name="FiltersChart" Zoom="Xy" LegendLocation="Right">
                        <chart:CartesianChart.AxisX>
                            <chart:Axis Title="Temps" LabelFormatter="{Binding Formatter}"/>
                        </chart:CartesianChart.AxisX>
                        <chart:CartesianChart.AxisY>
                            <chart:Axis Title="Valeur"/>
                        </chart:CartesianChart.AxisY>
                    </chart:CartesianChart>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Status Bar -->
        <StatusBar Grid.Row="2" Grid.Column="1">
            <StatusBarItem>
                <TextBlock x:Name="StatusTextBlock" Text="Prêt"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
